{# uk-height-viewport #}
<div class="uk-panel uk-panel-box uk-panel-box-hover uk-height-1-1">
    <h3 class="uk-panel-title"><span class="uk-icon-list"></span> 车辆列表</h3>
    <form id="searchVehicleForm" class="uk-form ">
        <input id="searchVehicle" class=" uk-form-width-small" placeholder="查找车辆..." autocomplete="off">
        <button class="uk-button uk-button-small uk-button-primary uk-icon-search"></button>
    </form>
    <div class="uk-form-select" data-uk-form-select>
        <span>选择车辆排列方式：</span>
        <select>
            <option value="">按所属区域</option>
            <option value="">按所属单位</option>
        </select>
    </div>
    <div class=" uk-scrollable-box " style="">
        <div id="tree">
            <!-- <ul class="uk-list uk-list-striped">
                <li data-jstree='{"opened":true, "type":"enterprise"}'>深圳龙澄高科
                    <ul>
                        <li data-jstree='{"opened":false, "type":"areatruck"}'>
                            大浪基地
                            <ul>
                                <li>
                                    粤B3UB55
                                </li>
                                <li>
                                    粤B5UB18
                                </li>
                                <li>
                                    粤B7QQ87
                                </li>
                                <li>
                                    粤B93275
                                </li>
                                <li>
                                    粤BU0462
                                </li>
                                <li>
                                    粤BU7887
                                </li>
                                <li>
                                    粤BU7966
                                </li>
                                <li>
                                    粤BU8110
                                </li>
                            </ul>
                        </li>
                        <li data-jstree='{"opened":false, "type":"areatruck"}'>
                            深圳总部
                            <ul>
                                <li>
                                    粤B166PP
                                </li>
                            </ul>
                        </li>
                        <li data-jstree='{"opened":true, "type":"areatruck"}'>
                            四会基地
                            <ul>
                                <li>
                                    豫BLC188
                                </li>
                                <li>
                                    粤BH8947
                                </li>
                                <li>
                                    粤BJ4895
                                </li>
                                <li>
                                    粤BJ939ZE
                                </li>
                                <li>
                                    粤BL2011
                                </li>
                                <li>
                                    粤BX1490
                                </li>
                                <li>
                                    粤HK2442
                                </li>
                                <li>
                                    粤HK3537
                                </li>
                                <li>
                                    粤HK3635
                                </li>
                                <li>粤HK3765
                                </li>
                                <li>
                                    粤HK3803
                                </li>
                                <li>
                                    粤HK3816
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul> -->
        </div>
    </div>
</div>
<script>
//     $(function(){
//   $("ul.tree").checkTree();
// });
$(function() {
    $("#tree")
        .on("changed.jstree", function(e, data) {
            //console.log(data.changed); // newly selected
            //console.log(data.changed.deselected); // newly deselected
        })
        .jstree({
            "types": {
                "default": {
                    "icon": "uk-icon-truck"
                },
                "enterprise": {
                    "icon": "uk-icon-sitemap"
                },
                "areatruck": {
                    "icon": "uk-icon-institution"
                }
            },
            "core": {
                "check_callback": true,
                "multiple": true,
                "animation": 0,
                "themes": {
                    // "variant" : "large"
                },

                'data': [
                    'Simple root node', {
                        'text': 'Root node 2',
                        'state': {
                            'opened': false,
                            'selected': true
                        },
                        'type': "enterprise",
                        'children': [{
                                'text': 'Child 1'
                            },
                            'Child 2'
                        ]
                    }
                ]
            },

            /*"conditionalselect": function(node, event) {
                return false;
            },*/
            "checkbox": {
                "keep_selected_style": false
            },
            "state": {
                "key": "demostate"
            },
            /*"massload": {
                "url": "/some/path",
                "data": function(nodes) {
                    return {
                        "ids": nodes.join(",")
                    };
                }
            }*/
            "plugins": ["checkbox", "changed",
                // "conditionalselect",
                // "contextmenu",
                "sort", "types", "state", "unique", "search",
                // "massload"
            ]
        });
});
$("#searchVehicleForm").click(function(e) {
    e.preventDefault();
    $("#tree").jstree(true).search($("#searchVehicle").val());
});

/*function GetTreeData() {
    $('#tree').data('jstree', false);
    $.ajax({
            url: '{% url '
            ajax_tree ' %}',
            type: 'post',
            dataType: 'json'
        })
        .done(function(data) {
            $('#tree').data('jstree', false).empty().jstree({
                'core': {
                    'data': data
                }
            });
        });*/
</script>